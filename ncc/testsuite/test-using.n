
module M {
  class Disposer implements System.IDisposable {
    str : string;
    
    public this (str : string) { this.str <- str; }
    
    public Dispose () : void { printf ("I'm being disposed - %s\n", this.str); }
  }

  public Main () : void {
   
    printf("Testing using...\n");
    def b = Disposer("two");
    using (a = Disposer("one"), b) {
      printf("Inside\n");
    };
    printf("Tested\n");
  }
}

(*
BEGIN-OUTPUT
Testing using...
Inside
I'm being disposed - one
I'm being disposed - two
Tested
END-OUTPUT
*)
