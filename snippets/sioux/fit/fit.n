namespace Sioux
{

using Nemerle.Collections;
using Nemerle.Xml;

public class FitApp extends Application
{
  post (name : string) : string
  {
    match (PostVars.Get (name)) {
      | Some (x) => x
      | None => ""
    }
  }

  submission_form () : void
  {
    FormTemplate <- XmlTemplate ("fit/submission-form.xml");
  }

  submission () : void
  {
    printf ("start\n");
    FormTemplate <- XmlTemplate ("fit/submission.xml");
    List.Iter (fun (val) {
      FormTemplate.SetText (val, post (val))
    }, ["first_name", "last_name"]);
    printf ("done\n");
  }
  
  override protected virtual Run () : void
  {
    printf ("run\n");
    match (PageName) {
      | "/submission" => submission ()
      | _ => submission_form ()
    }
  }
}


} // end Sioux
