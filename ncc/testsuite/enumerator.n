
using Nemerle.IO;
using Nemerle.Collections;

module M {
  public Main () : void {

    def mySL = System.Collections.SortedList();
    mySL.Add("Second", "World");
    mySL.Add("First", "Hello");
    mySL.Add("Third", "!");
    def e = mySL.GetEnumerator ();
    while (e.MoveNext ()) {
      printf ("%s\n", ((e.Current :> System.Collections.DictionaryEntry).Value 
                       :> string))
    };
    foreach (e : System.Collections.DictionaryEntry in mySL) {
      printf ("%s", (e.Value :> string))
    };
    printf ("\n");

    def x = Hashtable ();
    x.Set ("aa", 1);
    x.Add ("cc", 3);
    x.Set ("bb", 2);
    mutable l = [];
    foreach (e : DictionaryEntry <string, int> in x) {
/// FIXME, with Nemerle strong types it should work
//      l = (e.Key, e.Value) :: l;
      l = ((e.Key :> string), (e.Value :> int)) :: l;
    };
    List.Iter (List.Sort (l, fun (x, y) {
      def (_, x) = x;
      def (_, y) = y;
      (y : int) - x
    }), fun (x) {
      def (a,b) = x;
      printf ("%s %d\n", a, b)
    });
  }
}
/*
BEGIN-OUTPUT
Hello
World
!
HelloWorld!
aa 1
bb 2
cc 3
END-OUTPUT
*/
